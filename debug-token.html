<!DOCTYPE html>
<html>
<head>
    <title>Token Debug</title>
</head>
<body>
    <h1>Token调试工具</h1>
    <div id="result"></div>

    <script>
        const token = localStorage.getItem('copus_token');
        const user = localStorage.getItem('copus_user');

        const result = document.getElementById('result');
        result.innerHTML = `
            <h2>localStorage内容:</h2>
            <p><strong>Token:</strong> ${token || '无token'}</p>
            <p><strong>Token长度:</strong> ${token ? token.length : 0}</p>
            <p><strong>Token段数:</strong> ${token ? token.split('.').length : 0}</p>
            <p><strong>User:</strong> ${user || '无用户信息'}</p>
            <h2>操作:</h2>
            <button onclick="clearStorage()">清除存储</button>
            <button onclick="location.reload()">刷新检查</button>
        `;

        function clearStorage() {
            localStorage.removeItem('copus_token');
            localStorage.removeItem('copus_user');
            alert('已清除localStorage');
            location.reload();
        }
    </script>
</body>
</html>